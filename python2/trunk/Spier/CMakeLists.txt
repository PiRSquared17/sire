########################################
#
# CMake file for Python wrapper:_Spier
#
########################################

if ( SIRE_BUILD_SPIER )
  # Third Party dependencies of this module
  include_directories( ${BOOST_INCLUDE_DIR}
                       ${PYTHON_INCLUDE_DIR}
                       ${SIRE_OPENGL_INCLUDE_DIR} 
                       ${SIRE_GSL_INCLUDE_PATH})

  # Sire include paths
  include_directories( BEFORE ${SIRE_INCLUDE_DIR}/Spier
                              ${SIRE_INCLUDE_DIR} )

  # Other python wrapping directories
  include_directories(${CMAKE_SOURCE_DIR})

  # Get the list of autogenerated files
  include(CMakeAutogenFile.txt)

  # Define the sources in Spier
  set ( WRAPSPIER_SOURCES

        _Spier.main.cpp
     
        ${PYPP_SOURCES}

      )

  # Create the library that holds all of the class wrappers
  add_library (Spier ${WRAPSPIER_SOURCES})

  set_target_properties (Spier
                         PROPERTIES
                           VERSION ${SIRE_VERSION}
                           SOVERSION ${SIRE_VERSION_MAJOR}
                           OUTPUT_NAME "Spier"
                           PREFIX "_"
                           SUFFIX ${PYTHON_MODULE_EXTENSION}
                        )
		       
  target_link_libraries (Spier
                         SirePython2
                         SIRE_Spier
                         ${BOOST_PYTHON_LIBRARY}
                         ${PYTHON_LIBRARIES}
                        )

  include( LimitSirePythonExportSymbols )
  export_this_symbol_only( "init_Spier" "_init_Spier" )

  # installation
  set( INSTALLDIR ${SIRE_PYTHON}/Sire/Spier )

  install( TARGETS Spier
           LIBRARY DESTINATION ${INSTALLDIR}
         )

  install( FILES __init__.py
           DESTINATION ${INSTALLDIR} 
         )

endif()
